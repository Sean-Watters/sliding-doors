\documentclass[handout]{beamer}
\usetheme{Boadilla}

\usepackage{amsmath}
\usepackage{unicode-math}
\usepackage{mathtools}
\usepackage[conor]{agda}

\setmathfont{XITS Math}
\input{latex/snippets} % agda code snippets

% manual agdfa typesetting
\newcommand{\xvar}{\AgdaBound{$x$}}
\newcommand{\yvar}{\AgdaBound{$y$}}
\newcommand{\nil}{\AgdaField{$[]$}}
\newcommand{\cons}{\AgdaField{$\dblcolon$}}
\newcommand{\phitm}{\AgdaFunction{$\phi$}}
\newcommand{\datatm}{\AgdaDatatype{Tm}}
\newcommand{\abstm}{\AgdaField{abs}}

\title[Extenensional Fin. Sets \& Multisets in TT]{Extensional Finite Sets and Multisets in Type Theory}
% \subtitle{Free Algebraic Structures via Fresh Lists}
\author[S. Watters]{Clemens Kupke \and Fredrik Nordvall Forsberg \and \underline{\textbf{Sean Watters}}}
\institute{University of Strathclyde}
\date{05/04/2024}

\begin{document}


\begin{frame}
  \titlepage{}
\end{frame}

\begin{frame}{Motivation: A Normal Form for Contexts}
\begin{exampleblock}{A Syntax with Binding}
\snippetdatatm{}
\end{exampleblock}

\begin{itemize}
\item  Consider the term $\abstm~\xvar~(\abstm~\yvar~\AgdaHole{?})$.

\item  Notice that the hole has type $\datatm~(\yvar~\cons~\xvar~\cons~\nil)$.

\item  This means if we had some $\phitm : \datatm~(\xvar~\cons~\yvar~\cons~\nil)$, it would not fit!
\end{itemize}

\begin{block}{Goal}
  If we need such a $\phi$ to fit in such a hole, then we need contexts that are \emph{sets}, not lists.
\end{block}
\end{frame}


\begin{frame}{Review: Sets, Subsets and Multisets in Type Theory}
\begin{block}{In Short}
\begin{itemize}
\item Sets are (a certain class of) \emph{types}, and
\item Given some $S : \mathsf{Set}$, subsets of $S$ are unary predicates $S \to \mathsf{Prop}$.
\item \emph{Decidable} subsets are functions $S \to 2$
\item Multisets over $S$ are functions $S \to \mathbb{N}$
\end{itemize}
\end{block}

\begin{block}{How to enforce finiteness?}
\begin{itemize}
\item Bijection with $\AgdaDatatype{Fin}~n$, for some $n : \mathbb{N}$?
\item An enumeration list?
\item The \emph{mere existence} (propositional trucation) of such an enumeration?
\item A higher-inductive type (in HoTT)?
\end{itemize}
\end{block}

\begin{center}
Our approach: an enumeration, using a \emph{sorted-by-construction} list.
\end{center}
\end{frame}


\begin{frame}{Fresh Lists}
-- fresh lists from Catarina, Agda stdlib
\end{frame}


\begin{frame}{Sorted Lists}
-- Towards finite sets as sorted lists:
-- definition, union
\end{frame}


\begin{frame}{Extensionality Principle}
\end{frame}


\begin{frame}{Some Weird Cats}
\end{frame}


\begin{frame}{A Free-Forgetful Adjunction}
\end{frame}


\begin{frame}{Multisets for Almost-Free}
\end{frame}


\begin{frame}{Other Results}
\begin{center}
\begin{tabular}{  |c|m{7em}|m{12em}| }
  \hline
  Freshness Relation & \centering{Data Structure} & \centering{Free Algebraic Structure} \tabularnewline
  \hline
  $\leq$, a total order & Sorted lists & Ordered Comm. Monoid \\
  $<$, a strict total order & Sorted lists w/o duplicates & Ordered idempotent comm.\ monoid \\
  $\lambda x. \lambda y. \bot$ & \AgdaDatatype{Maybe} & Pointed set \\
  $\lambda x. \lambda y. \top$ & \AgdaDatatype{List} & Monoid \\
  $\neq$ & Lists w/o duplicates & Left-regular band monoid \\
  $=$ & $1 + (A \times \mathbb{N}^{>0})$ & Reflexive partial monoid \\
  \hline
\end{tabular}
\end{center}
\end{frame}


\begin{frame}{References}
\begin{itemize}
\item our paper
\item catarina's paper
\item vikraman's paper
\end{itemize}
\end{frame}

\begin{frame}{Scottish Programming Languages and Verification Summer School 2024}
\begin{itemize}
  \item What: Topics in TCS, particularly foudnations of PL \& formal verification.
  \item Where: \textbf{University of Strathclyce, Glasgow}
  \item When: \textbf{Monday 19 July -- Friday 2 August}.
  \item Invited Lecturer: Lindsey Kuper, UC Santa Cruz.
  \item Core courses on Category Theory and Type Theory by Chris Heunen and Conor McBride.
  \item Specialised courses by Bob Atkey, Kathrin Stark, Vikraman Choudhury, Andr\'{e}s Goens, Sam Lindley, and Jules Hedges.
\end{itemize}

\begin{center}
  https://scottish-pl-institute.github.io/splv/2024-strathclyde
\end{center}
\end{frame}

\end{document}
